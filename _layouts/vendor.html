---
layout: default
map: false
---
{% assign display_title = page.title | default: page.name %}
{% assign review_target = page.slug | default: page.title | slugify %}
{% assign encoded_title = page.title | default: page.name | uri_escape %}
{% assign street_val = page.address | default: "" | strip %}
{% assign lat_val = page.lat | default: "" | strip %}
{% assign lon_val = page.lon | default: "" | strip %}
{% assign address_parts = "" | split: "" %}
{% if street_val != "" %}{% assign address_parts = address_parts | push: street_val %}{% endif %}
{% if page.suburb %}{% assign address_parts = address_parts | push: page.suburb %}{% endif %}
{% if page.city or page.city_town %}{% assign address_parts = address_parts | push: page.city | default: page.city_town %}{% endif %}
{% if page.region %}{% assign address_parts = address_parts | push: page.region %}{% endif %}
{% if page.country %}{% assign address_parts = address_parts | push: page.country %}{% endif %}
{% assign display_address = address_parts | join: ', ' %}
{% assign maps_query = display_address | uri_escape %}
{% assign website_url = page.website | default: "" %}
{% if website_url != "" and website_url contains "://" %}
{% elsif website_url != "" %}
  {% assign website_url = "https://" | append: website_url %}
{% endif %}
{% assign phone_href = page.phone | default: "" | replace: ' ', '' | replace: '(', '' | replace: ')', '' %}
<section class="listing">
  <header class="listing__header">
    <div>
      <p class="listing__type">{{ page.type | default: 'Vendor' | capitalize }}</p>
      <h1>{{ display_title }}</h1>
      <p class="listing__location">
        {% if street_val != "" %}
          <a class="listing__location-link" href="https://www.google.com/maps/search/?api=1&query={{ maps_query }}" target="_blank" rel="noopener">
            {{ display_address }}
          </a>
        {% elsif display_address != "" %}
          <span class="muted">{{ display_address }}</span>
        {% else %}
          <span class="muted">Address not provided yet.</span>
        {% endif %}
      </p>
      {% if website_url != "" or page.email or phone_href != "" %}
      <div class="listing__contact">
        {% if website_url != "" %}<a href="{{ website_url }}" rel="noopener">Website</a>{% endif %}
        {% if page.email %}<a href="mailto:{{ page.email }}">Email</a>{% endif %}
        {% if phone_href != "" %}<a href="tel:{{ phone_href }}">{{ page.phone }}</a>{% endif %}
      </div>
      {% endif %}
    </div>
  </header>

  <div class="listing__content">
    {{ content | default: page.description }}
  </div>

  <div class="listing__meta">
    <div class="listing__actions">
      <a class="button ghost" href="{{ '/submit.html?submission_type=update&listing=' | append: review_target | append: '&name=' | append: encoded_title | relative_url }}">Update listing</a>
      <a class="button ghost" href="{{ '/review.html?listing=' | append: review_target | relative_url }}">Review this place</a>
    </div>
    {% include rating.html listing=page %}
    {% if page.sourcing_tags %}
      <div>
        <h2>Sourcing</h2>
        <ul class="tag-list">
          {% for tag in page.sourcing_tags %}
          <li>{{ tag }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% if page.products_or_cuisine %}
      <div>
        <h2>Products or cuisine</h2>
        <ul class="tag-list">
          {% for item in page.products_or_cuisine %}
          <li>{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% if page.suppliers %}
      <div>
        <h2>Suppliers</h2>
        <ul class="link-list">
          {% for item in page.suppliers %}
          <li>{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </div>
</section>
