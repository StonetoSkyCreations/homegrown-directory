---
layout: default
map: false
---
{% assign display_title = page.title | default: page.name %}
{% assign review_target = page.slug | default: page.title | slugify %}
{% assign encoded_title = page.title | default: page.name | uri_escape %}
{% assign website_url = page.website | default: "" %}
{% assign short_description = page.description | default: page.excerpt | default: "" %}
{% assign trimmed_body = content | strip %}
{% assign empty_array = "" | split: "" %}
{% if website_url != "" and website_url contains "://" %}
{% elsif website_url != "" %}
  {% assign website_url = "https://" | append: website_url %}
{% endif %}
{% assign phone_href = page.phone | default: "" | replace: ' ', '' | replace: '(', '' | replace: ')', '' %}
{% assign schema_type = 'LocalBusiness' %}
{% if page.type %}
  {% assign type_token = page.type | downcase %}
  {% if type_token contains 'restaurant' or type_token contains 'cafe' %}
    {% assign schema_type = 'Restaurant' %}
  {% endif %}
{% endif %}
<section class="listing">
  <header class="listing__header">
    <div class="listing__header-row">
      <div>
        <p class="listing__type">{{ page.type | default: 'Vendor' | capitalize }}</p>
        <h1>{{ display_title }}</h1>
        <p class="listing__location">
          {% include address-block.html %}
        </p>
        {% assign has_email = page.email | to_s | strip %}
        {% if website_url != "" or has_email != "" or phone_href != "" %}
        <div class="listing__contact">
          {% if website_url != "" %}<a href="{{ website_url }}" rel="noopener">Website</a>{% endif %}
          {% if has_email != "" %}<a href="mailto:{{ page.email }}">Email</a>{% endif %}
          {% if phone_href != "" %}<a href="tel:{{ phone_href }}">{{ page.phone }}</a>{% endif %}
        </div>
        {% endif %}
      </div>
      <div class="share-control" data-share>
        <button type="button" class="button ghost share-button" aria-expanded="false">
          Share
        </button>
        <div class="share-menu" role="menu">
          <button type="button" class="share-menu__item" data-share-copy>Copy link</button>
          <a class="share-menu__item" data-share-email href="#" role="menuitem">Email</a>
          <a class="share-menu__item" data-share-facebook href="#" role="menuitem">Facebook</a>
        </div>
      </div>
    </div>
  </header>

  <div class="listing__content">
    {% assign has_long_description = page.long_description | to_s | strip %}
    {% if has_long_description != "" %}
      <div class="listing__body">
        {{ page.long_description | markdownify }}
      </div>
    {% elsif trimmed_body != "" %}
      <div class="listing__body">
        {{ content }}
      </div>
    {% elsif short_description != "" %}
      <div class="listing__body">
        <p>{{ short_description }}</p>
      </div>
    {% endif %}

    <section class="listing-updates-reviews">
      {% include listing-reviews.html listing=page %}
    </section>
  </div>

  <div class="listing__meta">
    <div class="listing__meta-top">
      {% include rating.html listing=page %}
    </div>
    <div class="listing__actions">
      <a class="button ghost" href="{{ '/submit.html?submission_type=update&listing=' | append: review_target | append: '&name=' | append: encoded_title | relative_url }}">Update listing</a>
      <a class="button ghost" href="{{ '/review.html?listing=' | append: review_target | relative_url }}">Review this place</a>
    </div>
    {% assign sourcing_list = page.sourcing_tags | default: empty_array | where_exp: "item", "item != nil and item != ''" %}
    {% if sourcing_list and sourcing_list.size > 0 %}
      <div>
        <h2>Sourcing</h2>
        <ul class="tag-list">
          {% for tag in sourcing_list %}
          <li>{{ tag }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% assign products_list = page.products_or_cuisine | default: empty_array | where_exp: "item", "item != nil and item != ''" %}
    {% if products_list and products_list.size > 0 %}
      <div>
        <h2>Products or cuisine</h2>
        <ul class="tag-list">
          {% for item in products_list %}
          <li>{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% assign suppliers_list = page.suppliers | default: empty_array | where_exp: "item", "item != nil and item != ''" %}
    {% if suppliers_list and suppliers_list.size > 0 %}
      <div>
        <h2>Suppliers</h2>
        <ul class="link-list">
          {% for item in suppliers_list %}
          <li>{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </div>
</section>

<script type="application/ld+json">
{% assign ld_properties = "" | split: "|" %}
{% capture ld_context %}"@context": "https://schema.org"{% endcapture %}
{% assign ld_properties = ld_properties | push: ld_context %}
{% capture ld_type %}"@type": "{{ schema_type }}"{% endcapture %}
{% assign ld_properties = ld_properties | push: ld_type %}
{% capture ld_name %}"name": "{{ display_title | escape }}"{% endcapture %}
{% assign ld_properties = ld_properties | push: ld_name %}
{% capture ld_description_prop %}"description": "{{ page.description | default: page.excerpt | strip_html | strip_newlines | escape }}"{% endcapture %}
{% assign ld_properties = ld_properties | push: ld_description_prop %}
{% assign ld_url = page.url | absolute_url %}
{% if website_url != "" %}
  {% capture ld_url_prop %}"url": "{{ website_url | escape }}"{% endcapture %}
{% else %}
  {% capture ld_url_prop %}"url": "{{ ld_url | escape }}"{% endcapture %}
{% endif %}
{% assign ld_properties = ld_properties | push: ld_url_prop %}
{% capture main_entity_prop %}"mainEntityOfPage": "{{ ld_url | escape }}"{% endcapture %}
{% assign ld_properties = ld_properties | push: main_entity_prop %}

{% assign address_value = page.address | to_s | strip %}
{% assign city_value = page.city | to_s | strip %}
{% assign region_value = page.region | to_s | strip %}
{% assign postcode_value = page.postcode | to_s | strip %}
{% assign country_value = page.country | to_s | strip %}
{% assign address_parts = "" | split: "|" %}
{% if address_value != "" %}{% capture street_prop %}"streetAddress": "{{ address_value | escape }}"{% endcapture %}{% assign address_parts = address_parts | push: street_prop %}{% endif %}
{% if city_value != "" %}{% capture city_prop %}"addressLocality": "{{ city_value | escape }}"{% endcapture %}{% assign address_parts = address_parts | push: city_prop %}{% endif %}
{% if region_value != "" %}{% capture region_prop %}"addressRegion": "{{ region_value | escape }}"{% endcapture %}{% assign address_parts = address_parts | push: region_prop %}{% endif %}
{% if postcode_value != "" %}{% capture postcode_prop %}"postalCode": "{{ postcode_value | escape }}"{% endcapture %}{% assign address_parts = address_parts | push: postcode_prop %}{% endif %}
{% if country_value != "" %}{% capture country_prop %}"addressCountry": "{{ country_value | escape }}"{% endcapture %}{% assign address_parts = address_parts | push: country_prop %}{% endif %}
{% if address_parts.size > 0 %}
  {% capture address_separator %},
    {% endcapture %}
  {% capture address_prop %}"address": {
    {{ address_parts | join: address_separator }}
  }{% endcapture %}
  {% assign ld_properties = ld_properties | push: address_prop %}
{% endif %}

{% assign phone_value = page.phone | to_s | strip %}
{% assign email_value = page.email | to_s | strip %}
{% if phone_value != "" %}
  {% capture phone_prop %}"telephone": "{{ phone_value | escape }}"{% endcapture %}
  {% assign ld_properties = ld_properties | push: phone_prop %}
{% endif %}
{% if email_value != "" %}
  {% capture email_prop %}"email": "{{ email_value | escape }}"{% endcapture %}
  {% assign ld_properties = ld_properties | push: email_prop %}
{% endif %}
{% assign lat_value = page.lat | to_s | strip %}
{% assign lon_value = page.lon | to_s | strip %}
{% if lat_value != "" and lon_value != "" %}
  {% capture geo_prop %}"geo": {
    "@type": "GeoCoordinates",
    "latitude": {{ lat_value }},
    "longitude": {{ lon_value }}
  }{% endcapture %}
  {% assign ld_properties = ld_properties | push: geo_prop %}
{% endif %}
{% if website_url != "" %}
  {% capture same_as_prop %}"sameAs": [
    "{{ website_url | escape }}"
  ]{% endcapture %}
  {% assign ld_properties = ld_properties | push: same_as_prop %}
{% endif %}
{
  {% capture ld_separator %},
  {% endcapture %}
  {{ ld_properties | join: ld_separator }}
}
</script>
