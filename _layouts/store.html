---
layout: default
map: false
---
{% assign display_title = page.title | default: page.name %}
{% assign review_target = page.slug | default: page.title | slugify %}
{% assign encoded_title = page.title | default: page.name | uri_escape %}
{% assign website_url = page.website | default: "" %}
{% assign short_description = page.description | default: page.excerpt | default: "" %}
{% assign trimmed_body = content | strip %}
{% if website_url != "" and website_url contains "://" %}
{% elsif website_url != "" %}
  {% assign website_url = "https://" | append: website_url %}
{% endif %}
{% assign phone_href = page.phone | default: "" | replace: ' ', '' | replace: '(', '' | replace: ')', '' %}
{% assign schema_type = 'GroceryStore' %}
{% if page.category == 'cafe' or page.type contains 'Cafe' or page.type contains 'cafe' %}
  {% assign schema_type = 'CafeOrCoffeeShop' %}
{% endif %}
<section class="listing">
  <header class="listing__header">
    <div class="listing__header-row">
      <div>
        <p class="listing__type">{{ page.type | capitalize }}</p>
        <h1>{{ display_title }}</h1>
        <p class="listing__location">
          {% include address-block.html %}
        </p>
        {% assign has_email = page.email | to_s | strip %}
        {% if website_url != "" or has_email != "" or phone_href != "" %}
        <div class="listing__contact">
          {% if website_url != "" %}<a href="{{ website_url }}" rel="noopener">Website</a>{% endif %}
          {% if has_email != "" %}<a href="mailto:{{ page.email }}">Email</a>{% endif %}
          {% if phone_href != "" %}<a href="tel:{{ phone_href }}">{{ page.phone }}</a>{% endif %}
        </div>
        {% endif %}
      </div>
      <div class="share-control" data-share>
        <button type="button" class="button ghost share-button" aria-expanded="false">
          <span class="share-button__icon" aria-hidden="true">â¤´</span>
          Share
        </button>
        <div class="share-menu" role="menu">
          <button type="button" class="share-menu__item" data-share-copy>Copy link</button>
          <a class="share-menu__item" data-share-email href="#" role="menuitem">Email</a>
          <a class="share-menu__item" data-share-facebook href="#" role="menuitem">Facebook</a>
        </div>
      </div>
    </div>
  </header>

  <div class="listing__content">
    {% if short_description != "" %}
    <div class="listing__intro">
      <p>{{ short_description }}</p>
    </div>
    {% endif %}

    {% if trimmed_body != "" %}
    <div class="listing__body">
      {{ content }}
    </div>
    {% endif %}

    <section class="listing-updates-reviews">
      {% include listing-reviews.html listing=page %}
    </section>
  </div>

  <div class="listing__meta">
    <div class="listing__actions">
      <a class="button ghost" href="{{ '/submit.html?submission_type=update&listing=' | append: review_target | append: '&name=' | append: encoded_title | relative_url }}">Update listing</a>
      <a class="button ghost" href="{{ '/review.html?listing=' | append: review_target | relative_url }}">Review this place</a>
    </div>
    {% include rating.html listing=page %}
    {% if page.products %}
      <div>
        <h2>Products</h2>
        <ul class="tag-list">
          {% for item in page.products %}
          <li>{{ item }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% if page.sourcing_tags %}
      <div>
        <h2>Sourcing</h2>
        <ul class="tag-list">
          {% for tag in page.sourcing_tags %}
          <li>{{ tag }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% if page.market_days %}
      <div>
        <h2>Market days</h2>
        <ul class="tag-list">
          {% for day in page.market_days %}
          <li>{{ day }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

{% if page.notes %}
      <div>
        <h2>Notes</h2>
        <p class="muted">{{ page.notes }}</p>
      </div>
    {% endif %}
  </div>
</section>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ schema_type }}",
  "name": "{{ display_title | escape }}",
  "description": "{{ page.description | default: page.excerpt | strip_html | strip_newlines | escape }}",
  {% if website_url != "" %}
  "url": "{{ website_url | escape }}",
  {% else %}
  "url": "{{ page.url | absolute_url }}",
  {% endif %}
  "mainEntityOfPage": "{{ page.url | absolute_url }}",
  {% if page.address or page.city or page.region or page.country or page.postcode %}
  "address": {
    "@type": "PostalAddress",
    {% if page.address %}"streetAddress": "{{ page.address | strip | escape }}",{% endif %}
    {% if page.city %}"addressLocality": "{{ page.city | strip | escape }}",{% endif %}
    {% if page.region %}"addressRegion": "{{ page.region | strip | escape }}",{% endif %}
    {% if page.postcode %}"postalCode": "{{ page.postcode | strip | escape }}",{% endif %}
    {% if page.country %}"addressCountry": "{{ page.country | strip | escape }}"{% endif %}
  },
  {% endif %}
  {% if page.phone %}
  "telephone": "{{ page.phone | strip | escape }}",
  {% endif %}
  {% if page.email %}
  "email": "{{ page.email | strip | escape }}",
  {% endif %}
  {% if page.lat and page.lon %}
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": {{ page.lat }},
    "longitude": {{ page.lon }}
  },
  {% endif %}
  {% if page.website %}
  "sameAs": [
    "{{ page.website | escape }}"
  ]
  {% endif %}
}
</script>
