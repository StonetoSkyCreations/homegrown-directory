layout: default
---
<section class="country-index" data-country-page="{{ page.country_slug }}">
  <header class="country-index__header">
    <p class="eyebrow">Country</p>
    <h1>{{ page.title }}</h1>
    <p class="lead">Explore farms, markets, stores, restaurants, and hubs contributing to transparent food systems in {{ page.title }}.</p>
    <a class="country-link" href="{{ '/map/#' | append: page.country_slug | relative_url }}">View on map</a>
  </header>

  <div class="country-index__content">
    {% assign collection_map = 'Farms:farms,Markets:markets,Stores:stores,Restaurants:restaurants,Hubs:distributors' | split: ',' %}
    {% for entry in collection_map %}
      {% assign parts = entry | split: ':' %}
      {% assign label = parts[0] %}
      {% assign key = parts[1] %}
      {% assign items = site[key] | where: 'country_slug', page.country_slug | sort: 'title' %}
      <section class="country-section">
        <div class="country-section__header">
          <h2>{{ label }}</h2>
          <p class="muted">{{ items.size }} listing{% if items.size != 1 %}s{% endif %}</p>
        </div>
        {% if items.size > 0 %}
        <div class="listing-grid">
          {% for listing in items %}
            {% include listing-card.html listing=listing %}
          {% endfor %}
        </div>
        {% else %}
        <p class="muted">No listings added yet. Contribute one to get started.</p>
        {% endif %}
      </section>
    {% endfor %}
  </div>
</section>
